# Использование комментариев в коде
Комментарии - пояснения к исходному коду программы, находящиеся непосредственно внутри комментируемого кода. Синтаксис комментариев определяется языком программирования. С точки зрения компилятора или интерпретатора, комментарии - часть текста программы, не влияющая на её семантику. Комментарии не оказывают никакого влияния на результат компиляции программы или её интерпретацию.

- [Необходимость использования комментариев](#необходимость-использования-комментариев)
- [Правила написания комментариев](#правила-написания-комментариев)
- [Дополнительная литература](#дополнительная-литература)


## Необходимость использования комментариев

Можно выделить два вида комментариев: 
* Документирующие - комментарии, которые используются для генерации документации (https://en.wikipedia.org/wiki/Documentation_generator), внешней по отношению к самому исходному коду. У нас не используются.
* Поясняющие - комментарии, используемые для описания намерений при написании кода.

К использованию комментариев нужно подходить осторожно. Они ухудшают читаемость кода, требуют времени на написание и поддержку, часто вводят в заблуждение.

* Если комментарий не несет пользы, то он вредный. Отсутствие комментария лучше, чем бесполезный комментарий. 
* Не используйте комментарии для пояснения синтаксиса и/или стандартных типов данных.

```csharp
private int _count; // Приватное поле, снаружи недоступно
Dictionary<string, string> _names; // Структура данных, которая представляет собой...

```

* Комментарии не должны дублировать код и описывать то, как мы решаем задачу. Вместо этого лучше сделать сам код более ясным.
```csharp
int n = list.Count; // Прихраниваем количество элементов
for (int i = 0; i < n; i++) // Запускаем цикл по всем элементам
{
    result += list[i]; // Прибавляем к результату значение текущего элемента
}

```
   
* Не применяйте комментарии для сокрытия неиспользующегося кода и оставления его на будущее. Для этого есть системы контроля версий.
* Не используйте комментарии для компенсации плохих именований. Идентификаторы должны иметь четкие, описательные имена, исключающие необходимость в дополнительных комментариях.
* Не комментируйте плохой код - перепишите его. Если в данный момент на это нет времени, лучше завести задачу в bug tracking системе (https://en.wikipedia.org/wiki/Bug_tracking_system) на проведение рефакторинга, чем оставить комментарий в духе: 
```csharp
// Need to refactor it

```
* Можно использовать TODO-комментарии только для локальной разработки, когда планируете переписать все отмеченные места, а сами комментарии не попадут в итоговый коммит.
* Не используйте комментарии для разделения большого куска кода в методе на блоки. Лучше разнести на методы сам код.
* Не пишите комментарии, которые не относятся к разработке.
```csharp
// Bull sh*t but worked

```
* Не пишите слишком длинные комментарии. Не нужно описывать редко используемый алгоритм. Достаточно указать его название и/или ссылку.
 
Чаще всего наличие поясняющих комментариев указывает на излишнюю сложность кодовой базы. Однако комментарий может быть полезен или необходим в некоторых случаях:
* В комментарии дается название и/или ссылка на реализуемый малоизвестный алгоритм или структуру данных 
```csharp
// For finding the shortest paths use Dijkstra's algorithm  https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm.

```
* Комментарий поясняет, почему используется необычный подход или непривычная структура данных в типичной задаче. Логичность решения сильно зависит от контекста и ограничений задачи. Поэтому более "эффективное", на первый взгляд, решение может не подходить для конкретного случая.
* Комментарий указывает на неочевидный момент, который не удалось пояснить с помощью кода.
```csharp
// Encoding.GetMaxByteCount returns different values on .NET and Mono.
public const int MaxBytesPerCharacter = 4; 

```
* Комментарии, которые обращают внимание на важные моменты.  Например, чтобы предупредить, что метод выполняется очень долго.
 
## Правила написания комментариев
Хорошо оформленные комментарии могут значительно улучшить читаемость кода, однако плохо оформленные могут сильно ей навредить. 
В C# используется три формы синтаксиса комментариев:
* Однострочные комментарии: все, что находится от разделителя «//» до конца строки - игнорируется компилятором. Используется для комментирования одной строки. 
```csharp
// Demonstrate the single line comment.

```
* Многострочные комментарии: используются для комментирования более чем одной строки. Компилятор игнорирует весь комментарий, расположенный между разделителями /* и */. Обычно используются для комментирования всего блока кода.
```csharp
/* Demonstrate the 
multiline comment. */

```
* Комментарии к XML-документации: это особый тип комментариев в C#, который используется для создания документации к коду путем добавления элементов XML в исходный код (https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/xmldoc/). У нас не используются. 

В основном мы придерживаемся стандартов .NET (https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/inside-a-program/coding-conventions). Комментарии должны соответствовать следующим правилам:

* Все комментарии должны быть на английском, никакого транслита.
* Располагайте комментарий на отдельной строке, предшествующей поясняемому коду, а не в конце строки кода.

Неверно
```csharp
int count = 0; // Some commenting.

```

Верно
```csharp
// Some commenting.
int count = 0; 

```
* Текст комментария начинается с заглавной буквы.
* Текст комментария оканчивается точкой.
* Разделяйте символы «//» и текст комментария пробелом.

Неверно
```csharp
//Some commenting.

```

Верно
```csharp
// Some commenting.

```

* Комментарии не должны мешать визуальному выравниванию. Делайте в комментарии такой же отступ, как и в коде, к которому он относится.
```csharp
// Some commenting0.
foreach()
{
    // Some commenting2.
    if()
    {...}
}

```

* Отделяйте каждый комментарий пустой строкой, если комментарий следует за строкой кода. Это помогает разделять чтение кода и комментариев.
```csharp
// Some commenting 0.
int result1 = GetResult(someValue1);

// Some commenting 1.
int result2 = GetResult(someValue2);

```

* Не помещайте многострочный комментарий в одну строку кода. Это бывает удобно при отладке, но ухудшает читабельность. Такой комментарий не должен попасть в итоговый коммит.
```csharp
DoSomething (width, /*height*/ 100);

```
* Использование синтаксиса для комментариев в несколько строк является опциональным. Однако рекомендуется использовать однострочные комментарии, независимо от количества строк. Многострочный стиль менее читаем и может привести к путанице, если он используется несколько раз во вложенной структуре. Поэтому данный стиль чаще подвержен ошибкам, чем однострочный аналог. К тому же современные IDE позволяют поместить блок кода в комментарий любого стиля простыми горячими клавишами.
* Избегайте необычной стилистики при написании комментариев. Комментарии не должны привлекать к себе слишком много визуального внимания.

Неверно
```csharp
/ *************************** \ 
* * 
* Some commenting. * 
* * 
\ *************************** /

```

Верно
```csharp
// Some commenting.

```

* Комментарий должен объяснять намерения программиста на более высоком уровне абстракции, чем код. В большинстве случаев можно избавиться от такого комментария путем использования более декларативного кода. 
* Комментарии должны указывать не на что и как мы делаем, а пояснять, почему мы делаем именно так. Реализацию должен объяснять сам код, если он этого не делает, то никакие комментарии не помогут.
* Следите за актуальностью комментариев. Если вносятся правки в функционал класса или метода, нужно править и существующие комментарии. После чего нужно закомитить эти правки.

## Дополнительная литература
Для дополнительной информации по целесообразности и правилам комментирования кода рекомендуется прочитать следующую литературу:
* С. Макконнелл, «Совершенный код. Мастер-класс».
* Р. Мартин, «Чистый код. Создание, анализ и рефакторинг».
* Д. Босуэлл, Т. Фаучер, «Читаемый код, или Программирование как искусство».
* М. Фаулер, «Рефакторинг. Улучшение проекта существующего кода».